!function(t){var e={};function s(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=9)}([,,,,function(t,e,s){var i=s(5);"string"==typeof i&&(i=[[t.i,i,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};s(7)(i,n);i.locals&&(t.exports=i.locals)},function(t,e,s){(t.exports=s(6)(!1)).push([t.i,"html{box-sizing:border-box}*,*:before,*:after{box-sizing:inherit}body{margin:0;padding:0;font-size:100%;line-height:1}.button-container{background-color:green;display:flex;width:800px;height:50px;position:relative;margin-top:0px;justify-content:flex-end}#myCanvas{margin:0px}.button-container input{border:none;margin:5px;height:50px}.button-container button{height:50px;width:100px;border-radius:3px;font-size:18px;align-items:right;border:none;margin:5px}.button-container input{border-radius:3px;font-size:18px;width:80px}input:hover{background-color:#d3d8d8}button:hover{background-color:#d3d8d8}.content{position:absolute;left:200px;top:0px}.content h1{text-align:center}.background-div{position:absolute;background-color:green;top:200px;left:00px;width:800px;height:450px;z-index:-20}\n",""])},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var s=function(t,e){var s=t[1]||"",i=t[3];if(!i)return s;if(e&&"function"==typeof btoa){var n=function(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}(i),r=i.sources.map(function(t){return"/*# sourceURL="+i.sourceRoot+t+" */"});return[s].concat(r).concat([n]).join("\n")}return[s].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+s+"}":s}).join("")},e.i=function(t,s){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},n=0;n<this.length;n++){var r=this[n][0];"number"==typeof r&&(i[r]=!0)}for(n=0;n<t.length;n++){var a=t[n];"number"==typeof a[0]&&i[a[0]]||(s&&!a[2]?a[2]=s:s&&(a[2]="("+a[2]+") and ("+s+")"),e.push(a))}},e}},function(t,e,s){var i={},n=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}}(function(){return window&&document&&document.all&&!window.atob}),r=function(t){var e={};return function(t,s){if("function"==typeof t)return t();if(void 0===e[t]){var i=function(t,e){return e?e.querySelector(t):document.querySelector(t)}.call(this,t,s);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[t]=i}return e[t]}}(),a=null,o=0,h=[],c=s(8);function l(t,e){for(var s=0;s<t.length;s++){var n=t[s],r=i[n.id];if(r){r.refs++;for(var a=0;a<r.parts.length;a++)r.parts[a](n.parts[a]);for(;a<n.parts.length;a++)r.parts.push(b(n.parts[a],e))}else{var o=[];for(a=0;a<n.parts.length;a++)o.push(b(n.parts[a],e));i[n.id]={id:n.id,refs:1,parts:o}}}}function u(t,e){for(var s=[],i={},n=0;n<t.length;n++){var r=t[n],a=e.base?r[0]+e.base:r[0],o={css:r[1],media:r[2],sourceMap:r[3]};i[a]?i[a].parts.push(o):s.push(i[a]={id:a,parts:[o]})}return s}function d(t,e){var s=r(t.insertInto);if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=h[h.length-1];if("top"===t.insertAt)i?i.nextSibling?s.insertBefore(e,i.nextSibling):s.appendChild(e):s.insertBefore(e,s.firstChild),h.push(e);else if("bottom"===t.insertAt)s.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var n=r(t.insertAt.before,s);s.insertBefore(e,n)}}function p(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=h.indexOf(t);e>=0&&h.splice(e,1)}function f(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var i=function(){0;return s.nc}();i&&(t.attrs.nonce=i)}return g(e,t.attrs),d(t,e),e}function g(t,e){Object.keys(e).forEach(function(s){t.setAttribute(s,e[s])})}function b(t,e){var s,i,n,r;if(e.transform&&t.css){if(!(r="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=r}if(e.singleton){var h=o++;s=a||(a=f(e)),i=k.bind(null,s,h,!1),n=k.bind(null,s,h,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(s=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",g(e,t.attrs),d(t,e),e}(e),i=function(t,e,s){var i=s.css,n=s.sourceMap,r=void 0===e.convertToAbsoluteUrls&&n;(e.convertToAbsoluteUrls||r)&&(i=c(i));n&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");var a=new Blob([i],{type:"text/css"}),o=t.href;t.href=URL.createObjectURL(a),o&&URL.revokeObjectURL(o)}.bind(null,s,e),n=function(){p(s),s.href&&URL.revokeObjectURL(s.href)}):(s=f(e),i=function(t,e){var s=e.css,i=e.media;i&&t.setAttribute("media",i);if(t.styleSheet)t.styleSheet.cssText=s;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(s))}}.bind(null,s),n=function(){p(s)});return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else n()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=n()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var s=u(t,e);return l(s,e),function(t){for(var n=[],r=0;r<s.length;r++){var a=s[r];(o=i[a.id]).refs--,n.push(o)}t&&l(u(t,e),e);for(r=0;r<n.length;r++){var o;if(0===(o=n[r]).refs){for(var h=0;h<o.parts.length;h++)o.parts[h]();delete i[o.id]}}}};var m=function(){var t=[];return function(e,s){return t[e]=s,t.filter(Boolean).join("\n")}}();function k(t,e,s,i){var n=s?"":i.css;if(t.styleSheet)t.styleSheet.cssText=m(e,n);else{var r=document.createTextNode(n),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(r,a[e]):t.appendChild(r)}}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var s=e.protocol+"//"+e.host,i=s+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var n,r=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(r)?t:(n=0===r.indexOf("//")?r:0===r.indexOf("/")?s+r:i+r.replace(/^\.\//,""),"url("+JSON.stringify(n)+")")})}},function(t,e,s){"use strict";s.r(e);s(4);var i=class{constructor(t){this.pos=t.pos,this.name=t.name,this.opponent=t.opponent,this.stack=t.stack,this.currentBet=0,this.hand=[],this.handName="",this.game=t.game,this.status="live",this.facingBet=this.facingBet.bind(this)}receiveCard(t){t.exposed=!1,this.hand.push(t)}makeBet(t){let e;t>(e=this.stack+this.currentBet>this.opponent.stack+this.opponent.currentBet?this.opponent.stack+this.opponent.currentBet:this.stack+this.currentBet)&&(t=e),console.log("effective: ",e),this.stack-=t-this.currentBet,this.currentBet=t}postSB(){return this.currentBet=5,this.stack-=5,5}postBB(){return this.currentBet=10,this.stack-=10,10}clearAllButtons(){const t=document.querySelector(".button-container");for(;t.firstChild;)t.removeChild(t.firstChild)}draw(t){t.fillStyle="black",t.font="20pt Arial",t.fillText(`${this.name}`,this.pos[0]+50,this.pos[1]),t.fillText(`${this.handName}`,this.pos[0]+200,this.pos[1]),t.fillStyle="black",t.font="20pt Arial",t.fillText(`${this.stack}`,this.pos[0]+50,this.pos[1]+30),t.fillStyle="black",t.font="20pt Arial",t.fillText(`${this.message}`,this.pos[0]+250,this.pos[1]+30)}};const n=["A","2","3","4","5","6","7","8","9","T","J","Q","K"],r=["c","s","h","d"],a={2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,T:10,J:11,Q:12,K:13,A:14},o=[72,96],h=[0,0],c=new Image;c.src="http://storage.googleapis.com/codeskulptor-assets/cards_jfitz.png";const l=new Image;l.src="http://storage.googleapis.com/codeskulptor-assets/card_jfitz_back.png";var u=class{constructor(t){this.suit=t.suit,this.rank=t.rank,this.value=a[t.rank],this.pos=t.pos,this.exposed=!t.exposed||t.exposed}draw(t){const e=[h[0]+o[0]*n.indexOf(this.rank),h[1]+o[1]*r.indexOf(this.suit)];!0===this.exposed?t.drawImage(c,e[0],e[1],o[0],o[1],this.pos[0],this.pos[1],o[0],o[1]):t.drawImage(l,0,0,o[0],o[1],this.pos[0],this.pos[1],o[0],o[1])}};const d=["A","2","3","4","5","6","7","8","9","T","J","Q","K"],p=["c","s","h","d"];var f=class{constructor(){this.cards=[];for(let t=0;t<d.length;t++)for(let e=0;e<p.length;e++)this.cards.push(new u({suit:p[e],rank:d[t]}));this.testCards=[new u({suit:"h",rank:"K"}),new u({suit:"c",rank:"T"}),new u({suit:"s",rank:"5"}),new u({suit:"s",rank:"5"}),new u({suit:"c",rank:"8"}),new u({suit:"s",rank:"6"}),new u({suit:"c",rank:"J"}),new u({suit:"d",rank:"9"}),new u({suit:"d",rank:"2"})],this.deal=this.deal.bind(this)}deal(t,e){const s=this.testCards.shift();return e&&e.receiveCard(s),t.receiveCard(s),s}};const g=["AA","KK","QQ","JJ","AKs","AKo","A5s"],b=["TT","99","88","AQs","AJs","ATs","A4s","KQs","KJs","KTs","QJs","QTs","JTs","T9s","98s","87s","76s","AQo","AJo","KQo","KJo","QJo"],m=["77","66","55","44","44","33","22","A9s","A8s","A7s","A6s","A3s","A2s","K9s","K8s","K7s","K6s","K5s","Q9s","Q8s","Q7s","Q6s","Q5s","J9s","J8s","J7s","J6s","J5s","T8s","T7s","97s","86s","76s","75s","65s","54s","ATo","A9o","A8o","A7o","A6o","A5o","A4o","A3o","A2o","KTo","K9o","QTo","Q9o","JTo","J9o","J8o","T9o","T8o","98o","97o","87o","76o"],k=["K4s","K3s","K2s","Q4s","Q3s","Q2s","J4s","J3s","J2s","T6s","T5s","T4s","T3s","96s","85s","74s","63s","53s","43s","32s","K8o","K7o","K6o","K5o","K4o","Q8o","Q7o","Q6o","J7o","J6o","T7o","T6o","96o","86o","85o","75o","74o","65o","44o","54o","53o","43o","42o","32o"],v=["T4s","T3s","T2s","95s","94s","93s","92s","84s","83s","82s","73s","72s","62s","52s","42s","K3o","K2o","K3o","K2o","Q5o","Q4o","Q3o","Q2o","J5o","J4o","J3o","J2o","T5o","T4o","T3o","T2o","95o","94o","93o","92o","84o","83o","82o","73o","72o","63o","62o","52o"];var y=class extends i{constructor(t){super(t),this.message="",this.group="",this.resetMessage=this.resetMessage.bind(this)}async facingBet(t,e,s){this.clearAllButtons();let i,n=!1;t>=(i=this.stack+this.currentBet?this.opponent.stack+this.opponent.currentBet:this.stack+this.currentBet)&&(n=!0),this.actionChoice="invalid",this.betSize=0,await new Promise(t=>setTimeout(t,1e3)),"pre"===s&&(this.actionChoice=this.facingBetPre()),"flop"===s&&(this.actionChoice=this.facingBetFlop()),"turn"===s&&(this.actionChoice=this.facingBetFlop()),"river"===s&&(this.actionChoice=this.facingBetRiver());const r=this.actionChoice;let a=this.betSize;switch(this.actionChoice="invalid",this.betSize=0,setTimeout(this.resetMessage,2e3),r){case"call":return this.stack-=t-this.currentBet,this.game.takeBet(t-this.currentBet),this.currentBet=t,this.message="call",this.game.bettingHash[s]+="c","call";case"fold":return this.status="dead",this.message="fold","fold";case"raise":return n?"call":(isNaN(a)&&(a=t-this.currentBet+t),(a=3*t)>this.stack+this.currentBet&&(a=this.stack+this.currentBet),a<t-this.currentBet+t&&(a=t-this.currentBet+t),a<20&&(a=20),a>e.stack+e.currentBet&&(a=e.stack+e.currentBet),this.stack-=a-this.currentBet,this.game.takeBet(a-this.currentBet),this.currentBet=a,this.message="raise",this.game.bettingHash[s]+="r",await e.facingBet(a,this,s),"raise")}}async betOption(t,e){setTimeout(this.resetMessage,2e3),this.actionChoice="invalid",console.log("bettingHash for this street is: ",this.game.bettingHash[e]),console.log("we're in bet option on street: ",e),console.log("current player with bet option is  ",this.name," opponent is",t.name," street: ",e),this.clearAllButtons(),this.actionChoice="invalid",this.betSize=Math.floor(this.game.pot/2)+this.currentBet,await new Promise(t=>setTimeout(t,500)),Math.random(),"pre"===e&&(this.actionChoice=this.betOptionPre()),"flop"===e&&(this.actionChoice=this.betOptionFlop()),"turn"===e&&(this.actionChoice=this.betOptionTurn()),"river"===e&&(this.actionChoice=this.betOptionRiver());const s=this.actionChoice;let i=this.betSize;switch(this.betSize=0,s){case"check":return this.message="check",this.game.bettingHash[e]+="x","check";case"bet":return 0===this.stack?"check":(isNaN(i)&&(i=10),i>t.stack&&(i=t.stack),i<10&&(i=10),i>this.stack&&(i=this.stack),this.stack-=i-this.currentBet,this.game.takeBet(i-this.currentBet),this.currentBet=i,this.message="bet",console.log("starting the await here"),this.game.bettingHash[e]+="b",await t.facingBet(i,this,e),"bet");case"fold":return console.log("folding"),this.message="fold",this.status="dead","fold"}}resetMessage(){this.message="",console.log("message is, game is: ",this.message,this.game),console.log("post render?"),this.game.render()}receiveCard(t){t.exposed=!1,this.hand.push(t)}exposeCards(){this.hand[0].exposed=!0,this.hand[1].exposed=!0}facingBetPre(t){this.getHandGroup();let e=this.handGroup;console.log("group is: ",e);let s=Math.random();if(console.log("Am I in the right place?"),console.log("bettingHash is: ",this.game.bettingHash.pre),this.game.bbPlayer===this){if("rrr"===this.game.bettingHash.pre)return[1].includes(e)?(this.betSize=4*t,"raise"):[2].includes(e)?"call":"fold";if("r"===this.game.bettingHash.pre)return[1].includes(e)?(this.betSize=4*t,"raise"):[2,3].includes(e)?"call":"fold";if(this.game.bettingHash.pre.includes("rr"))return console.log("line 298 of computer.js"),[1].includes(e)?(this.betSize=4*t,"raise"):[2].includes(e)?"call":"fold";if(console.log("passed the stuff we should pass"),console.log("group is: ",e),1===e)return this.betSize=4*t,"raise";if(2===e)return this.betSize=4*t,"raise";if(3===e)return console.log("yep, G3"),s>.5?(this.betSize=4*t,"raise"):"call";if(4===e)return s>.7?(this.betSize=4*t,"raise"):s>.3?"call":"fold";if(5===e)return s<.5?"fold":"call"}else{if(console.log("making opening decision"),console.log("group is: ",e),1===e)return this.betSize=Math.floor(2.5*this.currentBet),"raise";if(2===e)return this.betSize=Math.floor(2.5*this.currentBet),"raise";if(3===e)return s>.5?(this.betSize=Math.floor(2.5*this.currentBet),this.betSize=Math.floor(2.5*this.currentBet),"raise"):"call";if(4===e)return s>.7?(this.betSize=Math.floor(2.5*this.currentBet),"raise"):"call";if(5===e)return s<.5?"call":"fold"}}betOptionPre(){this.getHandGroup();let t=this.handGroup,e=Math.random();return 1===t?(this.betSize=3*this.currentBet,"bet"):2===t?(this.betSize=3*this.currentBet,"bet"):3===t?e>.5?(this.betSize=3*this.currentBet,"bet"):"check":4===t?e>.7?(this.betSize=3*this.currentBet,"bet"):"check":5===t?"check":void 0}facingBetFlop(t){if(this.game.bbPlayer===this){let t=Math.random();return"high card"===this.game.getHandStrength(this.hand)?t<.25?"raise":t>.75?"fold":"call":"pair"===this.game.getHandStrength(this.hand)?t<.75?"call":"raise":t<.03?"call":"raise"}if(this.game.sbPlayer===this){let t=Math.random();return"high card"===this.game.getHandStrength(this.hand)?t<.15?"raise":t>.9?"fold":"call":"pair"===this.game.getHandStrength(this.hand)?t<.75?"call":"raise":t<.5?"call":"raise"}}betOptionFlop(){if(this.game.bbPlayer===this&&["rc","rrrc"].includes(this.game.bettingHash.pre))return"check";if(["cx"].includes(this.game.bettingHash.pre)){let t=Math.random();return"high card"===this.game.getHandStrength(this.hand)?t<.25?"check":"bet":"pair"===this.game.getHandStrength(this.hand)?t<.75?"bet":"check":(console.log("hand is strong Cat1"),t<.2?"check":"bet")}return["cbc","rrc","rc"].includes(this.game.bettingHash.pre)?(console.log("cbet"),"bet"):void 0}betOptionTurn(){let t=Math.random(),e=this.game.getHandStrength(this.hand);return this.game.bbPlayer===this?["rc","rrrc"].includes(this.game.bettingHash.pre)?"check":["cx"].includes(this.game.bettingHash.flop)?"high card"===e&&t<.35?"check":"high card"===e?"bet":t<.1?"check":"bet":["crc","crrrc"].includes(this.game.bettingHash.flop)?t<.3&&"high card"===e?"check":"bet":"check":["xbc","xbrrc"].includes(this.game.bettingHash.flop)?t<.3&&"high card"==e?"check":void 0:"bet"}betOptionRiver(){if(this.game.bbPlayer===this&&["rc","rrrc"].includes(this.game.bettingHash.pre))return"check";if(["cx","cbc","rrc"].includes(this.game.bettingHash.pre)){let t=Math.random();return"high card"===this.game.getHandStrength(this.hand)?t<.35?"bet":"check":"pair"===this.game.getHandStrength(this.hand)?t<.35?"bet":"check":"bet"}}facingBetRiver(t){if(this.game.bbPlayer===this){let t=Math.random();return"high card"===this.game.getHandStrength(this.hand)?t<.35?"raise":"fold":"pair"===this.game.getHandStrength(this.hand)?t<.75?"call":"fold":t<.01?"call":"raise"}}getHandGroup(){let t="";this.hand[0].value<this.hand[1].value?this.hand=[this.hand[1],this.hand[0]]:this.hand=[this.hand[0],this.hand[1]],t=this.hand[0].value===this.hand[1].value?`${this.hand[0].rank}${this.hand[1].rank}`:this.hand[0].suit!==this.hand[1].suit?`${this.hand[0].rank}${this.hand[1].rank}o`:`${this.hand[0].rank}${this.hand[1].rank}s`,g.includes(t)&&(this.handGroup=1),b.includes(t)&&(this.handGroup=2),m.includes(t)&&(this.handGroup=3),k.includes(t)&&(this.handGroup=4),v.includes(t)&&(this.handGroup=5)}};var x=class extends i{constructor(t){super(t),this.message=""}async facingBet(t,e,s){console.log("current player facing a bet is is ",this.name," opponent is",e.name),this.clearAllButtons(),"Human"===this.name&&this.createFacingBetButtons(),this.actionChoice="invalid",this.betSize=0;let i,n=!1;t>=(i=this.stack+this.currentBet?this.opponent.stack+this.opponent.currentBet:this.stack+this.currentBet)&&(n=!0),"Computer"===this.name?this.actionChoice="call":await this.actionChoicePromise;const r=this.actionChoice;let a=parseInt(this.betSize);switch(this.actionChoice="invalid",this.betSize=0,e.message="",r){case"call":return console.log(this.name," called!!"),this.stack-=t-this.currentBet,this.game.takeBet(t-this.currentBet),this.currentBet=t,this.game.bettingHash[s]+="c","call";case"fold":return console.log("current player is ",this.name," opponent is",e.name),console.log(this.name," folded"),this.status="dead",this.game.bettingHash[s]+="f","fold";case"raise":return n?"call":(isNaN(a)&&(a=t-this.currentBet+t),a>this.stack+this.currentBet&&(a=this.stack+this.currentBet),a>e.stack+e.currentBet&&(a=e.stack),a<t-this.currentBet+t&&(console.log("test is happening"),a=t-this.currentBet+t),a<20&&(a=20),console.log(this.name," raised"),this.stack-=a-this.currentBet,this.game.takeBet(a-this.currentBet),this.currentBet=a,this.game.bettingHash[s]+="r",await e.facingBet(a,this,s),"raise")}}async betOption(t,e){console.log("current player with bet option is  ",this.name," opponent is",t.name," street: ",e),this.clearAllButtons(),"Human"===this.name&&this.createBetOptionButtons(),this.actionChoice="invalid",this.betSize=0,"Computer"===this.name?this.actionChoice="check":await this.actionChoicePromise;const s=this.actionChoice;let i=parseInt(this.betSize);switch(this.actionChoice="invalid",this.betSize=0,console.log(this.name,"action choice is: ",s,"on street: ",e),s){case"check":return console.log(this.name," checked!!"),this.game.bettingHash[e]+="x","check";case"bet":return isNaN(i)&&(i=10),i>this.stack&&(i=this.stack),i>t.stack&&(i=t.stack),i<10&&(i=10),console.log(this.name," bet",i),this.stack-=i-this.currentBet,this.game.takeBet(i-this.currentBet),this.currentBet=i,this.game.bettingHash[e]+="b",await t.facingBet(i,this,e),"bet";case"fold":return console.log("folding"),this.status="dead",this.game.bettingHash[e]+="f","fold"}}createBetOptionButtons(){const t=document.querySelector(".button-container"),e=document.createElement("input"),s=document.createElement("button"),i=document.createElement("button");s.innerText="Bet",i.innerText="Check",t.appendChild(e),t.appendChild(s),t.appendChild(i),this.actionChoicePromise=new Promise(t=>{s.addEventListener("click",()=>{t();const e=document.querySelector("input");console.log("Betting",e.value),this.actionChoice="bet",this.betSize=e.value}),i.addEventListener("click",()=>{t(),console.log("checking"),this.actionChoice="check"})})}createFacingBetButtons(){const t=document.querySelector(".button-container"),e=document.createElement("button"),s=document.createElement("input"),i=document.createElement("button"),n=document.createElement("button");n.innerText="Fold",e.innerText="Call",s.value="",i.innerText="Raise",t.appendChild(s),t.appendChild(i),t.appendChild(e),t.appendChild(n),this.actionChoicePromise=new Promise(t=>{i.addEventListener("click",()=>{t();const e=document.querySelector("input");this.actionChoice="raise",this.betSize=e.value}),n.addEventListener("click",()=>{t(),console.log("folding"),this.actionChoice="fold"}),e.addEventListener("click",()=>{t(),console.log("call"),this.actionChoice="call"})})}clearAllButtons(){const t=document.querySelector(".button-container");for(;t.firstChild;)t.removeChild(t.firstChild)}receiveCard(t){t.exposed=!0,this.hand.push(t)}};const B={2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,T:10,J:11,Q:12,K:13,A:14},w={quads:1,"full house":2,flush:3,straight:4,"3 of a kind":5,"2 pair":6,pair:7,"high card":8};class P{constructor(t){this.human=new x({pos:[300,450],stack:1e3,name:"Human",game:this}),this.computer=new y({pos:[300,50],stack:1e3,name:"Computer",game:this,opponent:this.human}),this.human.opponent=this.computer,this.deck=new f,this.pot=0,this.allIn=!1,this.ctx=t.ctx,this.sbPlayer="",this.bbPlayer="",this.status="live",this.message="",this.bettingHash={pre:"",flop:"",turn:"",river:""},this.runHand(this.computer,this.human)}async runHand(t,e){this.human.stack<=0&&window.alert("You already lost!  Click start over to try again!"),this.computer.stack<=0&&window.alert("Congrats on winning!  Click start over to play again!"),console.log("starting new hand"),this.render(),this.sbPlayer=e,this.bbPlayer=t,this.sbPlayer.status="live",this.bbPlayer.status="live",this.setUp(t,e),await this.runPreflop(),this.checkStatus(),"live"===this.status&&await this.runFlop(),"live"===this.status&&await this.runTurn(),"live"===this.status&&await this.runRiver(),console.log("HAND IS OVER"),this.finishHand(e,t),this.render()}async runPreflop(){this.sbPlayer.handName="",this.bbPlayer.handName="",console.log("preflop"),console.log("Comp cards are: ",this.computer.hand),"call"===await this.sbPlayer.facingBet(10,this.bbPlayer,"pre")&&await this.bbPlayer.betOption(this.sbPlayer,"pre")}async runFlop(){if(this.resetCurrentBets(this.bbPlayer,this.sbPlayer),this.dealFlop(),console.log("starting the flop now"),console.log("Comp cards are: ",this.computer.hand),this.checkAllIn(),this.allIn)return void await new Promise(t=>setTimeout(t,1e3));"check"===await this.bbPlayer.betOption(this.sbPlayer,"flop")&&await this.sbPlayer.betOption(this.bbPlayer,"flop"),"dead"===this.checkStatus()&&this.finishHand()}async runTurn(){if(this.resetCurrentBets(this.bbPlayer,this.sbPlayer),this.dealTurn(),console.log("starting the turn now"),console.log("Comp cards are: ",this.computer.hand),this.checkAllIn(),this.allIn)return void await new Promise(t=>setTimeout(t,1e3));"check"===await this.bbPlayer.betOption(this.sbPlayer,"turn")&&await this.sbPlayer.betOption(this.bbPlayer,"turn"),"dead"===this.checkStatus()&&this.finishHand()}async runRiver(){if(this.resetCurrentBets(this.bbPlayer,this.sbPlayer),this.dealRiver(),console.log("starting the river now"),console.log("Comp cards are: ",this.computer.hand),this.checkAllIn(),this.allIn)return void await new Promise(t=>setTimeout(t,1e3));"check"===await this.bbPlayer.betOption(this.sbPlayer,"river")&&await this.sbPlayer.betOption(this.bbPlayer,"river"),"dead"===this.checkStatus()&&this.finishHand()}clearPrevState(){this.bbPlayer.currentBet=0,this.sbPlayer.currentBet=0,this.bbPlayer.hand=[],this.sbPlayer.hand=[],this.allIn=!1,this.pot=0,this.deck=new f,this.bettingHash={pre:"",flop:"",turn:"",river:""}}setUp(t,e){this.card1=this.deck.deal(this.human),this.card1.pos=[350,300],this.card2=this.deck.deal(this.human),this.card2.pos=[400,300],this.card3=this.deck.deal(this.computer),this.card3.pos=[350,90],this.card4=this.deck.deal(this.computer),this.card4.pos=[400,90],t.postBB(),e.postSB(),this.pot+=15,e.currentBet=5,this.bbPlayer.status="live",this.sbPlayer.status="live",this.render()}dealFlop(){this.card5=this.deck.deal(this.human,this.computer),this.card6=this.deck.deal(this.human,this.computer),this.card7=this.deck.deal(this.human,this.computer),this.card5.pos=[50,200],this.card6.pos=[125,200],this.card7.pos=[200,200],this.card5.draw(this.ctx),this.card6.draw(this.ctx),this.card7.draw(this.ctx),console.log("Comp cards are: ",this.computer.cards)}dealTurn(){this.card8=this.deck.deal(this.human,this.computer),this.card8.pos=[275,200],this.card8.draw(this.ctx),this.render()}dealRiver(){this.card9=this.deck.deal(this.human,this.computer),this.card9.pos=[350,200],this.card9.draw(this.ctx)}takeBet(t){this.pot+=t,console.log("pot is now",this.pot)}checkAllIn(){0===this.human.stack&&(this.allIn=!0),0===this.computer.stack&&(this.allIn=!0)}checkStatus(){if("live"===this.sbPlayer.status&&"live"===this.bbPlayer.status)return console.log("hand is still live"),this.status="live","live";"live"===this.bbPlayer.status&&(this.status=this.bbPlayer),"live"===this.sbPlayer.status&&(this.status=this.sbPlayer)}finishHand(t,e){console.log("finishing hand now");let s="";this.status===this.bbPlayer?s=this.bbPlayer:this.status===this.sbPlayer?s=this.sbPlayer:(console.log("sb player cards are: ",t.hand),console.log(this.getHandStrength(t.hand)),t.handName=this.getHandStrength(t.hand),e.handName=this.getHandStrength(e.hand),w[t.handName]>w[e.handName]?s=e:w[t.handName]<w[e.handName]?s=t:(console.log("we need to figure this shit out..."),console.log("we think the winner is: ",this.breakTie(t.handName)),s=this.breakTie(t.handName))),"tie"!==s?(s.stack+=this.pot,this.pot=0,console.log(s.stack)):(console.log("looks like its a tie..."),this.sbPlayer.stack+=Math.floor(this.pot/2),this.bbPlayer.stack+=Math.floor(this.pot/2)),this.message="tie"===s?"Its a push":`winner is ${s.name}`,this.computer.exposeCards(),this.clearPrevState,this.human.clearAllButtons(),this.createGameManageButtons()}breakTie(t){console.log("breaking the tie...");let e=[],s=[],i={},n={};for(var r=0;r<7;r++)e.push(B[this.sbPlayer.hand[r].rank]),s.push(B[this.bbPlayer.hand[r].rank]),i[B[this.sbPlayer.hand[r].rank]]=i[B[this.sbPlayer.hand[r].rank]]+1||1,n[B[this.bbPlayer.hand[r].rank]]=n[B[this.bbPlayer.hand[r].rank]]+1||1;e.sort((t,e)=>t-e).reverse(),s.sort((t,e)=>t-e).reverse();let a=[],o=[];if("high card"===t&&(a=e.slice(0,5),o=s.slice(0,5)),"pair"===t){console.log("yes, we both have 1 pair hands"),console.log("sbValues is: ",e),console.log("sbPairsHahs is: ",i),a.push(parseInt(Object.keys(i).find(t=>2===i[t]))),a.push(parseInt(Object.keys(i).find(t=>2===i[t])));let t=0;for(;a.length<5;)2!==i[e[t]]&&a.push(e[t]),t++;for(o.push(parseInt(Object.keys(n).find(t=>2===n[t]))),o.push(parseInt(Object.keys(n).find(t=>2===n[t]))),t=0;o.length<5;)2!==n[s[t]]&&o.push(s[t]),t++;console.log("sbHand, bbHand",a,o)}if("2 pair"===t){for(let t=0;t<7;t++)2!==i[e[t]]||a.includes(e[t])||(a.push(e[t]),a.push(e[t]));let t=0;for(;a.length<5;)a.includes(e[t])||a.push(e[t]),t++;for(let t=0;t<7;t++)2!==n[s[t]]||o.includes(s[t])||(o.push(s[t]),o.push(s[t]));for(t=0;o.length<5;)o.includes(e[t])||o.push(e[t]),t++}if(t="3 of a kind"){a.push(Object.keys(i).find(t=>3===i[t])),a.push(Object.keys(i).find(t=>3===i[t]));let t=0;for(;a.length<5;)e[t]!==i[2]&&a.push(e[t]),t++;for(o.push(Object.keys(n).find(t=>3===n[t])),o.push(Object.keys(n).find(t=>3===n[t])),t=0;o.length<5;)s[t]!==n[2]&&o.push(s[t]),t++}(t="straight")&&(e.sort((t,e)=>t-e).reverse(),s.sort((t,e)=>t-e).reverse());for(let t=0;t<5;t++){if(a[t]>o[t])return this.sbPlayer;if(a[t]<o[t])return this.bbPlayer}return"tie"}resetCurrentBets(t,e){t.currentBet=0,e.currentBet=0}getHandStrength(t){const e={},s={},i=[];let n=[];for(var r=0;r<t.length;r++){e[t[r].rank]=e[t[r].rank]+1||1,s[t[r].suit]=s[t[r].suit]+1||1,i.push(t[r].rank);let a=B[t[r].rank];n.includes(a)||n.push(a)}if(n=n.sort((t,e)=>t-e).reverse(),Object.values(e).includes(4))return"quads";if(Object.values(e).includes(3)&&Object.values(e).includes(2))return"full house";if(Object.values(s).sort((t,e)=>t-e)[Object.values(s).length]>=5)return"flush";if(Object.values(s).sort().reverse()[0]>=5)return"flush";for(var a=0;a<n.length-4;a++)if(!0===this.checkStraight(n.slice(a,a+5)))return"straight";return Object.values(e).includes(3)?"3 of a kind":this.checkTwoPair(Object.values(e))?"2 pair":Object.values(e).includes(2)?"pair":"high card"}checkStraight(t){for(let e=0;e<t.length;e++)if(t[0]-t[e]!=e)return!1;return!0}checkTwoPair(t){for(let e=0;e<t.length-1;e++)if(2===t[e])for(let s=e+1;s<t.length;s++)if(2===t[s])return!0;return!1}createGameManageButtons(){console.log("creating buttons");const t=document.querySelector(".button-container"),e=document.createElement("button"),s=document.createElement("button");e.innerText="deal",s.innerText="Start Over",t.appendChild(e),t.appendChild(s),e.addEventListener("click",()=>{console.log('dealing now"'),this.message="",this.clearPrevState(),this.runHand(this.sbPlayer,this.bbPlayer)}),s.addEventListener("click",()=>{console.log('dealing now"'),new P({ctx:this.ctx})})}render(){let t;this.ctx.clearRect(0,0,800,500),this.ctx.fillStyle="green",this.ctx.fillRect(0,0,800,500),this.ctx.fillStyle="black",this.ctx.font="20pt Arial",this.ctx.fillText(`${this.pot}`,450,250),this.human.draw(this.ctx),this.computer.draw(this.ctx),this.human.hand.forEach(t=>{t.draw(this.ctx)}),this.computer.hand.forEach(t=>{t.draw(this.ctx)}),this.ctx.fillStyle="black",this.ctx.font="20pt Arial",this.ctx.fillText(`${this.human.currentBet}`,250,400),this.ctx.fillStyle="black",this.ctx.font="20pt Arial",this.ctx.fillText(`${this.computer.currentBet}`,250,100),this.ctx.fillStyle="black",this.ctx.font="20pt Arial",this.ctx.fillText(`${this.message}`,500,250),t=this.bbPlayer===this.human?[225,150]:[225,450],this.ctx.beginPath(),this.ctx.arc(t[0],t[1],15,0,2*Math.PI),this.ctx.lineWidth=0,this.ctx.fillStyle="white",this.ctx.fill(),this.ctx.stroke(),this.ctx.fillStyle="black",this.ctx.font="15pt Arial",this.ctx.fillText("D",t[0]-6,t[1]+6),window.requestAnimationFrame(this.render.bind(this))}}var S=P;document.addEventListener("DOMContentLoaded",function(){const t=document.getElementById("myCanvas");t.width=800,t.height=500;const e=t.getContext("2d");e.fillStyle="green",e.fillRect(100,100,800,500),new S({ctx:e})})}]);
//# sourceMappingURL=bundle.eb9cacac74f68c3f2377.js.map